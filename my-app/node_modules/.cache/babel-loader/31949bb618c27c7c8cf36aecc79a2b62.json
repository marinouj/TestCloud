{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/marin/Downloads/hhhhh/Test/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"C:/Users/marin/Downloads/hhhhh/Test/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"C:/Users/marin/Downloads/hhhhh/Test/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/marin/Downloads/hhhhh/Test/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/marin/Downloads/hhhhh/Test/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Users/marin/Downloads/hhhhh/Test/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/marin/Downloads/hhhhh/Test/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/marin/Downloads/hhhhh/Test/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/marin/Downloads/hhhhh/Test/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import RegisterForm from\"./RegisterForm\";import*as userActions from\"../actions/UserActions\";import{jsx as _jsx}from\"react/jsx-runtime\";var ManageRegister=/*#__PURE__*/function(_React$Component){_inherits(ManageRegister,_React$Component);var _super=_createSuper(ManageRegister);function ManageRegister(){var _this;_classCallCheck(this,ManageRegister);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={user:{id:\"\",name:\"\",surname:\"\",username:\"\",password:\"\",email:\"\",role:\"\"}};_this.updateInfo=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;var user=_objectSpread(_objectSpread({},_this.state.user),{},_defineProperty({},name,value));_this.setState({user:user});};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();userActions.loadUsers().then(function(newData){var uid=Math.max.apply(Math,_toConsumableArray(newData.map(function(a){return a.UserId;})))+1;_this.state.user.id=uid;console.log(_this.state.user);userActions.createUser(_this.state.user).then(function(res){console.log(res);window.location.assign(\"../\");}).catch(function(error){alert(\"Register failed: \"+error);});}).catch(function(error){alert(\"Register failed: \"+error);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(ManageRegister,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(RegisterForm,{user:this.state.user,onSubmit:this.handleSubmit,onChange:this.updateInfo});}}]);return ManageRegister;}(React.Component);export default ManageRegister;","map":{"version":3,"sources":["C:/Users/marin/Downloads/hhhhh/Test/my-app/src/REGISTER/ManageRegister.jsx"],"names":["React","RegisterForm","userActions","ManageRegister","state","user","id","name","surname","username","password","email","role","updateInfo","event","target","value","setState","handleSubmit","preventDefault","loadUsers","then","newData","uid","Math","max","map","a","UserId","console","log","createUser","res","window","location","assign","catch","error","alert","Component"],"mappings":"+5CAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,wBAA7B,C,8CAEMC,CAAAA,c,uWACJC,K,CAAQ,CACNC,IAAI,CAAE,CACJC,EAAE,CAAE,EADA,CAEJC,IAAI,CAAE,EAFF,CAGJC,OAAO,CAAE,EAHL,CAIJC,QAAQ,CAAE,EAJN,CAKJC,QAAQ,CAAE,EALN,CAMJC,KAAK,CAAE,EANH,CAOJC,IAAI,CAAE,EAPF,CADA,C,OAYRC,U,CAAa,SAACC,KAAD,CAAW,CACtB,kBAAwBA,KAAK,CAACC,MAA9B,CAAQR,IAAR,eAAQA,IAAR,CAAcS,KAAd,eAAcA,KAAd,CACA,GAAMX,CAAAA,IAAI,gCAAQ,MAAKD,KAAL,CAAWC,IAAnB,wBAA0BE,IAA1B,CAAiCS,KAAjC,EAAV,CACA,MAAKC,QAAL,CAAc,CAAEZ,IAAI,CAAJA,IAAF,CAAd,EACD,C,OAEDa,Y,0FAAe,iBAAOJ,KAAP,kHACbA,KAAK,CAACK,cAAN,GACAjB,WAAW,CACRkB,SADH,GAEGC,IAFH,CAEQ,SAACC,OAAD,CAAa,CACjB,GAAMC,CAAAA,GAAG,CAAGC,IAAI,CAACC,GAAL,OAAAD,IAAI,oBAAQF,OAAO,CAACI,GAAR,CAAY,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,MAAT,EAAZ,CAAR,EAAJ,CAA4C,CAAxD,CACA,MAAKxB,KAAL,CAAWC,IAAX,CAAgBC,EAAhB,CAAqBiB,GAArB,CACAM,OAAO,CAACC,GAAR,CAAY,MAAK1B,KAAL,CAAWC,IAAvB,EACAH,WAAW,CACR6B,UADH,CACc,MAAK3B,KAAL,CAAWC,IADzB,EAEGgB,IAFH,CAEQ,SAACW,GAAD,CAAS,CACbH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB,EACD,CALH,EAMGC,KANH,CAMS,SAACC,KAAD,CAAW,CAChBC,KAAK,CAAC,oBAAsBD,KAAvB,CAAL,CACD,CARH,EASD,CAfH,EAgBGD,KAhBH,CAgBS,SAACC,KAAD,CAAW,CAChBC,KAAK,CAAC,oBAAsBD,KAAvB,CAAL,CACD,CAlBH,EAFa,sD,8HAuBf,iBAAS,CACP,mBACE,KAAC,YAAD,EACE,IAAI,CAAE,KAAKjC,KAAL,CAAWC,IADnB,CAEE,QAAQ,CAAE,KAAKa,YAFjB,CAGE,QAAQ,CAAE,KAAKL,UAHjB,EADF,CAOD,C,4BAlD0Bb,KAAK,CAACuC,S,EAqDnC,cAAepC,CAAAA,cAAf","sourcesContent":["import React from \"react\";\r\nimport RegisterForm from \"./RegisterForm\";\r\nimport * as userActions from \"../actions/UserActions\";\r\n\r\nclass ManageRegister extends React.Component {\r\n  state = {\r\n    user: {\r\n      id: \"\",\r\n      name: \"\",\r\n      surname: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      email: \"\",\r\n      role: \"\",\r\n    },\r\n  };\r\n\r\n  updateInfo = (event) => {\r\n    const { name, value } = event.target;\r\n    const user = { ...this.state.user, [name]: value };\r\n    this.setState({ user });\r\n  };\r\n\r\n  handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    userActions\r\n      .loadUsers()\r\n      .then((newData) => {\r\n        const uid = Math.max(...newData.map((a) => a.UserId)) + 1;\r\n        this.state.user.id = uid;\r\n        console.log(this.state.user);\r\n        userActions\r\n          .createUser(this.state.user)\r\n          .then((res) => {\r\n            console.log(res);\r\n            window.location.assign(\"../\");\r\n          })\r\n          .catch((error) => {\r\n            alert(\"Register failed: \" + error);\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        alert(\"Register failed: \" + error);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <RegisterForm\r\n        user={this.state.user}\r\n        onSubmit={this.handleSubmit}\r\n        onChange={this.updateInfo}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default ManageRegister;\r\n"]},"metadata":{},"sourceType":"module"}